<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body {
  background: linear-gradient(to right, #6a1b9a, #9c27b0);
  color: white;
  font-family: 'Segoe UI', sans-serif;
}
.container {
  margin-top: 50px;
  max-width: 1100px;
}
h2, h4 {
  font-weight: bold;
  color: #fff;
}
.table-container {
  background: rgba(255,255,255,0.08);
  border-radius: 12px;
  padding: 30px 20px 20px 20px;
  margin: 30px auto;
  box-shadow: 0 4px 24px 0 rgba(0,0,0,0.10);
}
.table {
  background: rgba(255,255,255,0.12);
  color: #fff;
  border-radius: 8px;
  overflow: hidden;
}
.table thead.table-dark th {
  background: #6a1b9a;
  color: #fff;
  border: none;
}
.table-striped > tbody > tr:nth-of-type(odd) {
  background: rgba(255,255,255,0.06);
}
.table-striped > tbody > tr:nth-of-type(even) {
  background: rgba(255,255,255,0.13);
}
.btn-warning, .btn-danger {
  color: #fff !important;
  border: none;
}
.btn-warning {
  background: #ff9800;
}
.btn-danger {
  background: #e53935;
}
.btn-warning:hover, .btn-danger:hover {
  opacity: 0.85;
}
.text-center {
  color: #fff;
}
::-webkit-scrollbar {
  width: 8px;
  background: #9c27b0;
}
::-webkit-scrollbar-thumb {
  background: #6a1b9a;
  border-radius: 4px;
}
@media (max-width: 768px) {
  .container { padding: 0 5px; }
  .table-container { padding: 10px 2px; }
  h2 { font-size: 1.5rem; }
  h4 { font-size: 1.1rem; }
}
</style>
</head>
<body>

<div class="container">
  <h2 class="text-center">Admin Panel</h2>
  <p class="text-center">Welcome, {{ session['name'] }}</p>

  <div class="table-container">
    <h4>Users</h4>
    <table class="table table-striped">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Email</th>
          <th>Role</th>
          <th>Action</th>
        </tr>
      </thead>
<tbody>
  {% for user in users %}
  <tr>
    <td>{{ user[0] }}</td>
    <td>{{ user[1] }}</td>
    <td>{{ user[2] }}</td>
    <td>{{ user[3] }}</td>
    <td>
      <a href="{{ url_for('edit_user', user_id=user[0]) }}" class="btn btn-sm btn-warning">Edit</a>
      <form action="{{ url_for('delete_user', user_id=user[0]) }}" method="post" style="display:inline;">
        <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Delete this user?');">Delete</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</tbody>
    </table>
  </div>

<div class="table-container">
  <h4>Prediction History</h4>
  <table class="table table-striped">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>User Email</th>
        <th>Prediction</th>
        <th>Symptoms</th>
        <th>Timestamp</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for p in predictions %}
      <tr>
        <td>{{ p[0] }}</td>
        <td>{{ p[1] }}</td>
        <td>{{ p[2] }}</td>
        <td>{{ p[3] }}</td>
        <td>{{ p[4] }}</td>
        <td>
          <form action="{{ url_for('delete_prediction', prediction_id=p[0]) }}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Delete this prediction?');">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

</div>
</body>
</html>
